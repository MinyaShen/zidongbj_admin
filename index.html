<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<meta name="apple-mobile-web-app-capable" content="yes">	
		<meta name="format-detection" content="telephone=no">	
    <title>自动报警监管维护平台</title>
		<!-- 引入css -->
		<link rel="stylesheet" type="text/css" href="static/layui/css/layui.css" />
		<link rel="stylesheet" type="text/css" href="static/css/public.css" />
		<link rel="stylesheet" type="text/css" href="static/css/index.css" />
  </head>
  <body class="layui-layout-body">
		<div class="layui-layout layui-layout-admin">
		  <div class="layui-header">
		    <!-- 头部区域 -->
				<h3 class="layui-layout-left">自动报警监管维护平台</h3>
		    <ul class="layui-nav layui-layout-right">
					<li class="layui-nav-item">
						<a href="javascript:;"><i class="iconfont">&#xe615;</i></a>
					</li>
		      <li class="layui-nav-item">
		        <a href="javascript:;">
		          <i class="iconfont">&#xe69d;</i>
		        </a>
		        <dl class="layui-nav-child">
		          <dd><a href="javascript:;">退出</a></dd>
		        </dl>
		      </li>
		      <li class="layui-nav-item">
						<a href="javascript:;"><i class="iconfont">&#xe625;</i></a>
					</li>
		    </ul>
		  </div>
		  
		  <div class="layui-side layui-side-menu leftMenu">
		    <div class="layui-side-scroll">
					<div class="layui-logo">
						<h2 class="admin-title">淮安市公安局洪泽分局</h2>
						<div class="admin-info">
							<div class="avatar-img-box"><img src="" /></div>
							<p class="nickname">管理员昵称</p>
						</div>
					</div>
		      <!-- 左侧导航区域 -->
		      <ul class="layui-nav layui-nav-tree" lay-shrink="all" id="LAY-system-side-menu" lay-filter="layadmin-system-side-menu">
		        <!-- <li class="layui-nav-item layui-nav-itemed">
		          <a href="javascript:;">
		          	<i class="iconfont">&#xe670;</i>
		          	<span>统计分析</span>
		          </a>
		        </li>
		        <li class="layui-nav-item">
		          <a href="javascript:;">
		          	<i class="iconfont">&#xe662;</i>
		          	<span>通知通报</span>
		          </a>
		        </li>
		        <li class="layui-nav-item">
							<a href="javascript:;">
								<i class="iconfont">&#xe604;</i>
								<span>用户单位信息</span>
							</a>
						</li>
		        <li class="layui-nav-item">
							<a href="javascript:;">
								<i class="iconfont">&#xe617;</i>
								<span>故障维护</span>
							</a>
						</li>
						<li class="layui-nav-item">
							<a href="javascript:;">
								<i class="iconfont">&#xe6a1;</i>
								<span>警情详情</span>
							</a>
						</li>
						<li class="layui-nav-item">
							<a href="javascript:;">
								<i class="iconfont">&#xe66c;</i>
								<span>设备管理</span>
							</a>
						</li>
						<li class="layui-nav-item">
							<a href="javascript:;">
								<i class="iconfont">&#xe615;</i>
								<span>用户管理</span>
							</a>
						</li> -->
		      </ul>
		    </div>
		  </div>
		  
			<!-- 内容主体区域 -->
			<div class="layui-body" id="larry-body">
				<!-- <h4 class="page-title">总览</h4> -->
				<div class="layui-tab-content">
					<iframe id="iframeParent" class="larry-iframe"></iframe>
				</div>
			</div>
		
		<script src="static/js/jquery.min.js"></script>
		<script src="static/layui/layui.js"></script>
		<script>
			var adminInfo = JSON.parse(localStorage.getItem('admin'))
			// document.cookie="SSIDA="+adminInfo.SSIDA;
			console.log(document.cookie)
			
			var menuArray = [
				{
					name: '统计分析',
					id: 0,
					pid: -1,
					url: '#/home.html',
					icon: '&#xe670;'
				},{
					name: '通知通报',
					id: 1,
					pid: -1,
					url: '#/noticeTable.html',
					icon: '&#xe662;'
				},{
					name: '用户单位信息',
					id: 2,
					pid: -1,
					url: '#/storesTable.html',
					icon: '&#xe604;'
				},{
					name: '故障维护',
					id: 3,
					pid: -1,
					url: '#/faultTable.html',
					icon: '&#xe617;'
				},{
					name: '警情详情',
					id: 4,
					pid: -1,
					url: '#/noticeTable.html',
					icon: '&#xe6a1;'
				},{
					name: '设备管理',
					id: 5,
					pid: -1,
					url: '#/noticeTable.html',
					icon: '&#xe66c;'
				},{
					name: '用户管理',
					id: 6,
					pid: -1,
					url: '#/noticeTable.html',
					icon: '&#xe615;'
				},
			]
			
			$(function () {
				layui.use(['form', 'layer', 'element'], function(){
					var form = layui.form,
					layer = layui.layer,
					element = layui.element
					
					showMenus(-1);
					element.render('nav')
					initRouter();
				})
			})
			
			// 路由设置
			function initRouter () {
				var url = window.location.href;
				console.log(url)
				var router;
				if (url.indexOf('#/') > -1) {
					router = url.substring(url.indexOf('#/') + 2);
					console.log(router)
					if (router === '') {
						// router = 'index.html';
						$('#iframeParent').attr('src', 'pages/home.html');
					} else {
						$('#iframeParent').attr('src', 'pages/' + router);
					}
				} else {
					$('#iframeParent').attr('src', 'pages/home.html');
					history.replaceState(null, null, '#/');
				}
				//地址栏修改不刷新的解决方案
				$('a').click(function () {
					if ($(this).attr('href')) {
						window.location.href = $(this).attr('href');
						window.location.reload();
					}
				});
			};
			
			// 加载左侧菜单
			function showMenus (id) {
				menuArray.forEach(function (item) {
					console.log(item)
					if (item.pid == id) {
						$('.leftMenu ul.layui-nav').append('<li menu-id="' + item.id + '" class="layui-nav-item"><a href="' + item.url + '"><i class="iconfont">' + item.icon + '</i><span>' + item.name +'</span></a></li>')
					}
				})
			};
			
		</script>
  </body>
</html>
