<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<meta name="apple-mobile-web-app-capable" content="yes">	
		<meta name="format-detection" content="telephone=no">	
		<title>故障维护</title>
		<!-- 引入css -->
		<link rel="stylesheet" type="text/css" href="../static/layui/css/layui.css" />
		<link rel="stylesheet" type="text/css" href="../static/css/public.css" />
		<link rel="stylesheet" type="text/css" href="../static/css/table.css" />
	</head>
	<body>
		<div class="alarm-wrapper">
			<h3 class="alarm-page-title">故障维护</h3>
			<div class="alarm-content">
				<div class="alarm-table-toolbar" id="tableToolbar">
					<form class="layui-form alarm-filter-form" action="">
						<div class="layui-form-item">
							<label class="layui-form-label">关键字：</label>
							<div class="layui-input-block">
								<input type="text" name="title" required  lay-verify="required" placeholder="点位名称、责任人姓名、电话" autocomplete="off" class="layui-input">
							</div>
						</div>
						<div class="layui-form-item">
							<label class="layui-form-label">上报时间：</label>
							<div class="layui-input-inline">
								<input type="text" class="layui-input" id="reportTime" placeholder="请选择时间">
							</div>
						</div>
						<div class="layui-form-item">
							<label class="layui-form-label">维护进度：</label>
							<div class="layui-input-block">
								<select name="storeType" placeholder="请选择">
									<option value=""></option>
									<option value="0">待审核</option>
									<option value="1">审核中</option>
									<option value="2">维修中</option>
									<option value="3">维修完成</option>
								</select>
							</div>
						</div>
						<div class="layui-form-item alarm-form-btns">
							<div class="layui-input-block">
								<button class="layui-btn alarm-btn-primary alarm-btn-size alarm-btn-search" lay-submit lay-filter="*">查询</button>
							</div>
						</div>
					</form>
					<div class="t-head-toolbar-btn">
						<button type="button" class="layui-btn alarm-btn-size alarm-btn-danger">删除</button>
					</div>
				</div>
				<table id="faultData" lay-filter="faultData"></table>
				<script type="text/html" id="tableBar">
					<a href="javascript:;" class="alarm-text-success" lay-event="view">详情</a>
				</script>
			</div>
		</div>
		
		<script src="../static/layui/layui.js"></script>
		<script>
			layui.use(['table', 'form', 'laydate', 'layer'], function(){
			  var table = layui.table,
				form = layui.form,
				laydate = layui.laydate,
				layer = layui.layer
				
				// 时间选择
				laydate.render({
					elem: '#reportTime',
					type: 'datetime',
					trigger: 'click',
					format: 'yyyy/MM/dd'
				});
			  
			  //表格
			  table.render({
			    elem: '#faultData'
					//,toolbar: '#tableToolbar'
					,height: 600
					,url: 'http://192.168.0.27/alarm/maintain/maintainPcList' //数据接口
					,method: 'get'
					,limit: 15
					,parseData: function (res) {
						console.log(res);
						return {
							"code": 0,
							"msg": '',
							"count": res.total,
							"data": res.data.list
						}
					}
					,page: true //开启分页
					,skin: 'line' //行边框风格
			    ,cols: [[ //表头
						{type: 'checkbox', fixed: 'left'}
			      ,{field: 'id', title: 'ID', width:80, sort: true}
			      ,{field: 'fullName', title: '故障点位', width:'20%'}
			      ,{field: 'dutyName', title: '负责人姓名', width:'8%'} 
			      ,{field: 'dutyTel', title: '负责人电话', width: '10%'}
			      ,{field: 'createTime', title: '上报时间', width: '10%'}
			      ,{field: 'name', title: '维保人员', width: '8%', sort: true}
			      ,{field: 'rocordStatus', title: '维护进度', width: '10%', sort: true}
			      ,{fixed: 'right', title: '操作', width: '10%', toolbar: '#tableBar'}
			    ]]
			  });
				
				// 表单
				form.on('submit(formDemo)', function(data){
					layer.msg(JSON.stringify(data.field));
					return false;
				});
			  
			});
		</script>
	</body>
</html>
